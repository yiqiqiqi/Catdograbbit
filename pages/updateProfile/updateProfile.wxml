<!-- pages/updateProfile/updateProfile.wxml -->
<view class="update-profile-container">
  <!-- 状态栏占位 -->
  <view class="status-bar"></view>
  <!-- 头像上传区域 -->
  <view class="avatar-section">
    <view class="section-card">
      <view class="section-title">头像</view>
      <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <image class="avatar" src="{{avatarUrl || '/images/default-avatar.png'}}"></image>
        <view class="avatar-overlay">
          <text class="avatar-text">点击更换</text>
        </view>
      </button> 
    </view>
  </view>

  <!-- 基本信息表单 -->
  <form bindsubmit="submitForm">
    <view class="form-section">
      <view class="section-card">
        <view class="section-title">基本信息</view>
        
        <!-- 昵称 -->
        <view class="form-item">
          <text class="form-label">昵称</text>
          <input 
            type="nickname" 
            class="form-input" 
            placeholder="请输入昵称"
            value="{{nickname}}"
            bindinput="onNicknameInput"
          />
        </view>
        
        <!-- 性别 -->
        <view class="form-item">
          <text class="form-label">性别</text>
          <view class="picker-container">
            <picker 
              mode="selector" 
              value="{{genderIndex}}" 
              range="{{genderOptions}}"
              bindchange="onGenderChange"
            >
              <view class="picker-text {{genderIndex >= 0 ? '' : 'placeholder'}}">
                {{genderIndex >= 0 ? genderOptions[genderIndex] : '请选择性别'}}
              </view>
            </picker>
            <text class="picker-arrow">›</text>
          </view>
        </view>
        
        <!-- 生日 -->
        <view class="form-item">
          <text class="form-label">生日</text>
          <view class="picker-container">
            <picker 
              mode="date" 
              value="{{birthday}}" 
              bindchange="onBirthdayChange"
            >
              <view class="picker-text {{birthday ? '' : 'placeholder'}}">
                {{birthday || '请选择生日'}}
              </view>
            </picker>
            <text class="picker-arrow">›</text>
          </view>
        </view>
        
        <!-- 地区 -->
        <view class="form-item">
          <text class="form-label">地区</text>
          <view class="picker-container">
            <picker 
              mode="region" 
              value="{{region}}" 
              bindchange="onRegionChange"
            >
              <view class="picker-text {{region && region.length > 0 ? '' : 'placeholder'}}">
                {{regionDisplayText || '请选择地区'}}
              </view>
            </picker>
            <text class="picker-arrow">›</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 宠物信息 -->
    <view class="form-section">
      <view class="section-card">
        <view class="section-title">养宠经验</view>
        
        <!-- 养宠经验 -->
        <view class="form-item">
          <view class="experience-selector">
            <view 
              class="experience-option {{experience === 0 ? 'active' : ''}}" 
              data-exp="0" 
              bindtap="selectExperience"
            >
              新手
            </view>
            <view 
              class="experience-option {{experience === 1 ? 'active' : ''}}" 
              data-exp="1" 
              bindtap="selectExperience"
            >
              1-3年
            </view>
            <view 
              class="experience-option {{experience === 3 ? 'active' : ''}}" 
              data-exp="3" 
              bindtap="selectExperience"
            >
              3-5年
            </view>
            <view 
              class="experience-option {{experience === 5 ? 'active' : ''}}" 
              data-exp="5" 
              bindtap="selectExperience"
            >
              5年以上
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="button-section">
      <button class="submit-btn" formType="submit" disabled="{{isSubmitting}}">
        {{isSubmitting ? '保存中...' : '保存'}}
      </button>
    </view>
  </form>
</view>