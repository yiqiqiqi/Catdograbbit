<!-- pages/feedback/feedback.wxml -->
<view class="container">
  <!-- åé¦ˆè¡¨å• -->
  <view class="section feedback-form">
    <view class="form-item">
      <text class="form-label">åé¦ˆç±»å‹</text>
      <picker 
        class="form-picker" 
        range="{{feedbackTypes}}" 
        range-key="name"
        value="{{typeIndex}}"
        bindchange="onTypeChange"
      >
        <view class="picker-content">
          <text class="picker-text">{{feedbackTypes[typeIndex].name}}</text>
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">è”ç³»æ–¹å¼</text>
      <input 
        class="form-input" 
        placeholder="è¯·è¾“å…¥æ‰‹æœºå·æˆ–é‚®ç®±ï¼ˆé€‰å¡«ï¼‰" 
        value="{{contact}}"
        bindinput="onContactInput"
      />
    </view>

    <view class="form-item content-item">
      <text class="form-label">åé¦ˆå†…å®¹</text>
      <textarea 
        class="content-textarea" 
        placeholder="è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜æˆ–å»ºè®®..." 
        placeholder-class="placeholder"
        maxlength="500"
        value="{{content}}"
        bindinput="onContentInput"
        show-confirm-bar="{{false}}"
        auto-height
      ></textarea>
      <view class="word-count">{{content.length}}/500</view>
    </view>

    <!-- å›¾ç‰‡ä¸Šä¼  -->
    <view class="form-item image-upload">
      <text class="form-label">ç›¸å…³æˆªå›¾</text>
      <view class="image-list">
        <block wx:for="{{images}}" wx:key="*this" wx:for-item="image" wx:for-index="index">
          <view class="image-item">
            <image class="image-preview" src="{{image}}" mode="aspectFill" />
            <view class="image-remove" data-index="{{index}}" bindtap="onRemoveImage">Ã—</view>
          </view>
        </block>
        
        <view class="image-item add-image" wx:if="{{images.length < 3}}" bindtap="onAddImage">
          <view class="add-icon">+</view>
          <text class="add-text">æ·»åŠ å›¾ç‰‡</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-section">
    <button 
      class="btn-submit {{!content ? 'disabled' : ''}}" 
      bindtap="onSubmit"
      disabled="{{!content}}"
    >
      æäº¤åé¦ˆ
    </button>
  </view>

  <!-- è”ç³»æ–¹å¼ -->
  <view class="section contact-info">
    <view class="contact-title">å…¶ä»–è”ç³»æ–¹å¼</view>
    <view class="contact-items">
      <view class="contact-item" bindtap="onCopyWechat">
        <text class="contact-icon">ğŸ’¬</text>
        <text class="contact-text">å¾®ä¿¡å®¢æœ: petdiary-service</text>
        <text class="contact-action">å¤åˆ¶</text>
      </view>
      <view class="contact-item" bindtap="onSendEmail">
        <text class="contact-icon">ğŸ“§</text>
        <text class="contact-text">é‚®ç®±: support@petdiary.com</text>
        <text class="contact-action">å‘é€</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½é®ç½© -->
  <view class="loading-mask" wx:if="{{isLoading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">æäº¤ä¸­...</text>
    </view>
  </view>
</view>