<view class="container">
  <!-- çŠ¶æ€æ å ä½ -->
  <view class="status-bar"></view>

  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-info-card">
    <view class="decorative-line top"></view>
    <view class="decorative-line bottom"></view>
    <!-- å¤´åƒåŒºåŸŸ -->
    <view class="user-avatar-container">
      <image 
        class="user-avatar" 
        src="{{userInfo.avatarUrl || '/images/avatar-default.png'}}" 
        mode="aspectFill"
      ></image>
    </view>

    <!-- æ˜µç§° -->
    <view class="user-name-wrap">
      <text class="user-name">{{userInfo.nickName || 'æœªè®¾ç½®æ˜µç§°'}}</text>
    </view>

    <!-- ç”¨æˆ·ID -->
    <view class="user-id-wrap">
      <text class="user-id">IDï¼š{{userId || 'æœªç™»å½•'}}</text>
    </view>

    <!-- ç§¯åˆ†ç­‰çº§åŒºåŸŸï¼ˆåŸç”Ÿprogressæ”¹é€ ï¼‰ -->
    <view class="points-level-area">
      <!-- ç§¯åˆ†å’ŒæŠ½å¥–åˆ¸æ˜¾ç¤º -->
      <view class="points-tickets-display">
        <view class="display-item">
          <text class="display-label">å½“å‰ç§¯åˆ†</text>
          <text class="display-value">{{userInfo.points || 0}}</text>
        </view>
        <view class="display-divider"></view>
        <view class="display-item">
          <text class="display-label">æŠ½å¥–åˆ¸</text>
          <text class="display-value">{{userInfo.lotteryTickets || 0}}<text class="display-unit">å¼ </text></text>
        </view>
      </view>

      <navigator
        url="/pages/points-center/points-center"
        class="points-level-container"
      >
        <!-- è¿›åº¦æ¡+æ•°å€¼+ç­‰çº§+å°åœ†ç‚¹åŒºåŸŸ -->
        <view class="progress-group">
         
          <!-- åŸç”Ÿprogresså®¹å™¨ï¼ˆå«å åŠ å°åœ†ç‚¹ï¼‰ -->
          <view class="progress-wrap" style="--progress-width: {{progressStep}}%">
           <!-- æ•°å€¼å±•ç¤ºï¼ˆå¦‚ï¼š0/100ï¼‰ -->
           <text class="progress-num"  wx:if="{{userLevel < 6}}">
            {{progressStep || 0}}/{{currentLevelMax}}
          </text>
         
            <!-- å¾®ä¿¡åŸç”Ÿè¿›åº¦æ¡ -->
            <progress
              percent="{{progressStep}}"
              stroke-width="12"
              color="#8b5cf6"
              backgroundColor="#e0d6ff"
              class="native-progress"
            />
            
            <!-- è¿›åº¦å°åœ†ç‚¹ï¼ˆå åŠ åœ¨åŸç”Ÿè¿›åº¦æ¡ä¸Šï¼‰ -->
            <view class="progress-dot"></view>
            <!-- ç­‰çº§æ ‡è¯†ï¼ˆå³ä¾§æ‚¬æµ®ï¼‰ -->
            <view class="level-badge">
              Lv.{{userLevel || 0}}
            </view>
          </view>
        </view>

        <!-- å‡çº§æç¤º+æŒ‰é’® -->
        <view class="upgrade-tip" wx:if="{{userLevel < 6}}">
          <text class="tip-text" bindtap="navigateToDailyTask">
            å‡çº§Lv.{{userLevel+1}}è¿˜å·®<text class="highlight">{{needPoints}}</text>ç§¯åˆ†,å»åšä»»åŠ¡>
          </text>
        </view>
        <view class="upgrade-tip" wx:else>
          <text class="tip-text">å·²è¾¾æœ€é«˜ç­‰çº§</text>
        </view>
      </navigator>
    </view>
  </view>

  <!-- åŠŸèƒ½ç½‘æ ¼+è®¾ç½®åˆ—è¡¨ï¼ˆåŸæœ‰å†…å®¹ä¸å˜ï¼‰ -->
  <view class="function-grid">
    <view class="function-card" bindtap="navigateToDailyTask">
      <text class="function-name">æ¯æ—¥ä»»åŠ¡</text>
      <view class="badge-dot" wx:if="{{hasUnfinishedTask && hasUserInfo}}"></view>
    </view>
    <view class="function-card" bindtap="navigateToPointsCenter">
      <text class="function-name">ç§¯åˆ†ä¸­å¿ƒ</text>
    </view>
    <view class="function-card" bindtap="navigateToMyPrizes">
      <text class="function-name">æˆ‘çš„å¥–å“</text>
    </view>
  </view>

  <!-- æ–°å¢ï¼šç§¯åˆ†åŠŸèƒ½åŒº -->
  <view class="points-actions-grid">
    <view class="action-card redeem" bindtap="goToRedeemCode">
      <view class="action-icon">ğŸ«</view>
      <text class="action-name">å…‘æ¢ç </text>
      <text class="action-desc">è¾“å…¥å…‘æ¢ç è·å–ç§¯åˆ†</text>
    </view>
    <view class="action-card lottery" bindtap="goToLuckyDraw">
      <view class="action-icon">ğŸ°</view>
      <text class="action-name">æŠ½å¥–</text>
      <text class="action-desc">æ¶ˆè€—1å¼ æŠ½å¥–åˆ¸</text>
    </view>
  </view>

  <view class="settings-container">
    <view class="settings-list">
      <view class="setting-item" bindtap="updateProfile">
        <text class="item-text">ç¼–è¾‘èµ„æ–™</text>
        <view class="item-arrow"></view>
      </view>
      <view class="setting-item" bindtap="contactUs">
        <text class="item-text">å¸®åŠ©ä¸åé¦ˆ</text>
        <view class="item-arrow"></view>
      </view>
      <view class="setting-item" bindtap="showAbout">
        <text class="item-text">å…³äºæˆ‘ä»¬</text>
        <view class="item-arrow"></view>
      </view>
    </view>

    <view class="logout-container">
      <view class="logout-btn" bindtap="logout">
        é€€å‡ºç™»å½•
      </view>
    </view>
  </view>
</view>